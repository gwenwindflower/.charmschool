# Remote control
allow_remote_control    no
# Clipboard
clipboard_control write-clipboard write-primary no-append read-clipboard-ask read-primary-ask

# UI
## Cursor
cursor_beam_thickness   2

# this is silly but it thins the very...err..thin text weight that i prefer
# out a tiny bit towards its true state, and lowers the contrast very slightly,
# while still making it legible for light-against-dark + dark-against-light,
# going lower on either value than this gets into harsh and illegible territory
text_composition_strategy 1 10
# all that said literally nobody could tell the difference between the above
# and the default setting below unless you're A/B'ing it back and forth
# so tl;dr: i'm dumb and love to waste time on nonsense
#
# the below sets to the best defaults for a given platform
# and is the best general setting to use if you're not a freak
# text_composition_strategy platform

## Layouts
enabled_layouts         tall:bias=60;full_size=1;mirrored=false

## Window style
# It looks weird to have no padding on macOS, but we can at least get rid of the bottom padding
# so OS tabs, tmux windows, nvim's statusline, etc. are all stacked flush with each other
window_padding_width    14 14 0 14
hide_window_decorations titlebar-only

## Background
dynamic_background_opacity   no
background_opacity           1

# Tab style
tab_bar_style           powerline
tab_bar_min_tabs        1
tab_powerline_style     slanted
bell_on_tab             
tab_activity_symbol     󰦖
tab_title_template      "{sup.index} {title} {bell_symbol}{activity_symbol}"

# Key configs
## tools that respond to the macOS 'option' key will receive the code they expect
## AND the larger share of tools that only respond to 'alt' will get that as well
## I have yet to encounter a tool that caused a problem from clashing because of this
## I'm sure it's out there, but this is the best option if you're on macOS imo
macos_option_as_alt     both

# Key mappings
#
## A note on the 'super' key:
## It's a point of contention for some devs whether to use 'super' in terminal keybinds
## my stance is, as long as you make sure the hierachy of tools you're working in all handle it the same way
## e.g. Kitty -> fish -> nvim all respond to super, then it's fine.
## If you're using a tool in the chain that doesn't handle to super, it might still be fine,
## but that's when you're getting into less reliable terriotry, and it may not be worth
## the extra cognitive load to think about what is responding to which keypresses.
## I love command line tools, but we should always push them forward to the modern era,
## not cling to the traditional ways of doing things out of a sense of purity or nostaligia.
#
## kitty_mod = meh (every modified except super)
## I keep 'meh' assigned to a single key via Karabiner, or external keyboard mappings for my mechanical keyboards
## using it as kitty_mod frees up all the other 1 and 2 modifier combinations, but retains compatibility
## with most terminal tools by excluding super
kitty_mod                  ctrl+shift+alt
## Window
map super+enter            new_window
map ctrl+super+enter       new_window_with_cwd
map super+w                close_window
map ctrl+alt+w             resize_window
map ctrl+super+h           neighboring_window left
map ctrl+super+j           neighboring_window down
map ctrl+super+k           neighboring_window up
map ctrl+super+l           neighboring_window right
map ctrl+super+left        resize_window narrower
map ctrl+super+right       resize_window wider
map ctrl+super+up          resize_window taller
map ctrl+super+down        resize_window shorter
map shift+super+right      move_window right
map shift+super+left       move_window left
map shift+super+up         move_window up
map shift+super+down       move_window down
## Tab
map super+t                new_tab_with_cwd
map ctrl+super+t           new_tab
map alt+super+t            set_tab_title
map ctrl+alt+l             next_tab
map ctrl+alt+h             previous_tab
map ctrl+alt+.             move_tab_forward
map ctrl+alt+,             move_tab_backward
map ctrl+alt+1             goto_tab 1
map ctrl+alt+2             goto_tab 2
map ctrl+alt+3             goto_tab 3
map ctrl+alt+4             goto_tab 4
map ctrl+alt+5             goto_tab 5
map ctrl+alt+6             goto_tab 6
map ctrl+alt+7             goto_tab 7
map ctrl+alt+8             goto_tab 8
map ctrl+alt+9             goto_tab 9
map ctrl+alt+0             goto_tab 999

## Clearing and scrollback
### Open kitty scrollback in pager (moor)
map kitty_mod+y  launch --stdin-source=@screen_scrollback --stdin-add-formatting --type=overlay fish -c "moor -quit-if-one-screen=false"
### kitty_mod+j/k scrolls line-wise (default), h/l scrolls prompt-by-prompt
map kitty_mod+h  scroll_to_prompt -1
map kitty_mod+l  scroll_to_prompt  1
### This clears the previous command into scrollback
map shift+super+e clear_terminal last_command active
## Utility
### Get unicode..err..code of any characters,
### useful for manually mapping missing special characters
### such as devicons
map kitty_mod+u           kitten unicode_input
## Unmaps
## Everything below is me freeing up keybinds I bind elsewhere (fish, OS-level stuff like Raycast, etc)
### I map these in fish with a custom function called 'fresh'
### which clears and reloads the terminal/shell environment in various ways
### so these are all just unmaps
map super+e
map ctrl+e
map ctrl+super+e
### Used for fish binding to run `lsd` in cwd, opens scrollback in pager by default
map super+l
### toggles Raycast AI in OS, is kitty's unicode tool by default
map ctrl+super+space
### I use these to trigger fzf.fish widgets
#### Directory search
map ctrl+alt+f
#### Env var search
map ctrl+alt+v
#### Process search
map ctrl+alt+p
### fish binding to launch Yazi file finder
map super+f
### fish binding to launch Claude Code
map ctrl+super+c
### fish binding to open Claude Code's config directory in Yazi
map alt+super+c
### fish binding to launch lazygit
map super+g
### fish binding to launch gh-dash (GitHub Dash extension)
map shift+super+g
### fish binding to launch forgit git log
map ctrl+alt+g
### fish binding to open editor in cwd
map super+o
### fish binding to open macOS Finder in cwd
map alt+super+o
### fish binding to wrap the contents of the command line in 'echo ""'
map ctrl+p
### fish binding to wrap the contents of the command line in an 'op run' call
map ctrl+s
### Used many places so we don't want Kitty ever intercepting
map ctrl+j
map ctrl+k

# Theme
include catppuccin-winnie.conf

# Fonts
font_size 14.0
## KITTY_FONT block is auto-generated by `kitty +list-fonts`
# BEGIN_KITTY_FONTS
font_family      family='Ellograph CF Fixed Pitch' style=Thin
bold_font        family='Ellograph CF Fixed Pitch' style=Regular
italic_font      family='Ellograph CF Fixed Pitch' style='Thin Italic'
bold_italic_font family='Ellograph CF Fixed Pitch' style='Regular Italic'
# END_KITTY_FONTS

## Manual maps of missing characters (mainly devicons)
# Occasionally kitty's internal Nerd Font gets out of sync or lags
# changes in the broader devicon space, so you can manually map
# characters temporarily until it gets patched, by pulling the latest
# Symbols Nerd Font (via Homebrew) and mapping here
# symbol_map U+e76f Symbols Nerd Font Mono # Bun icon
